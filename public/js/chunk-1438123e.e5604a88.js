(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-1438123e"],{"94c5":function(t,e,s){"use strict";s("bb42")},bb42:function(t,e,s){},fc96:function(t,e,s){"use strict";s.r(e);var n=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"viewpost-view"},[s("v-icon",{staticStyle:{position:"absolute","z-index":"2",left:"2px",top:"3px",cursor:"pointer"},attrs:{size:"42",color:"primary"},on:{click:t.navigateBack}},[t._v(" mdi-chevron-left-circle ")]),s("div",{staticClass:"post-container"},[s("div",{staticClass:"container-left"},[s("v-card",{staticStyle:{"z-index":"1"},attrs:{elevation:"2","min-width":"900","max-width":"900"}},[s("v-card-title",[t._v(t._s(t.currentPost.title))]),s("v-card-subtitle",[t._v(t._s(t.currentPost.author))]),s("v-card-text",[s("pre",[t._v(t._s(t.currentPost.text))])])],1),t.isLoggedIn?s("div",{staticClass:"comment"},[s("v-text-field",{staticStyle:{margin:"20px 0 0 5px"},attrs:{placeholder:"Comment..."},on:{keydown:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.submitComment(e)}},model:{value:t.text,callback:function(e){t.text=e},expression:"text"}}),s("div",{staticClass:"comment-buttons"},[s("v-btn",{staticStyle:{"margin-right":"5px"},attrs:{text:""},on:{click:t.cancelComment}},[t._v("Cancel")]),s("v-btn",{attrs:{color:"primary"},on:{click:t.submitComment}},[t._v("Comment")])],1)],1):s("div",{staticClass:"comment"},[s("p",{staticStyle:{margin:"20px 0 0 5px"}},[t._v(" Please "),s("router-link",{attrs:{to:"/login"}},[t._v("sign in")]),t._v(" to vote and comment. ")],1)]),s("div",{staticClass:"comments"},[[s("v-card",{staticClass:"mx-auto",attrs:{tile:""}},t._l(t.allComments,(function(e){return s("div",{key:e._id},[s("v-list-item",[s("v-list-item-content",[s("v-list-item-subtitle",[t._v(t._s(e.author))]),t._v(" "+t._s(e.text)+" ")],1)],1),s("v-divider",{staticStyle:{margin:"0 14px 0 14px"}})],1)})),0)]],2)],1),s("div",{staticClass:"container-right"},[s("v-card",{attrs:{"min-width":"300"}},[s("v-card-title",[t._v("Post Info")]),s("v-card-subtitle",[t._v("Some simple post data")]),s("div",{staticClass:"post-info"},[s("v-icon",{attrs:{size:"32",color:"blue"}},[t._v(" mdi-comment-multiple ")]),s("span",{staticStyle:{"margin-left":"10px","font-size":"12px"}},[t._v(t._s(t.allComments.length)+" "),1==t.allComments.length?s("span",[t._v(" comment")]):s("span",[t._v(" comments")])])],1),s("div",{staticClass:"post-votes"},[s("div",[s("v-btn",{staticClass:"mx-2",attrs:{disabled:1===t.oldVote||3===t.oldVote,fab:"",dark:0===t.oldVote||2===t.oldVote,small:"",color:"green",value:"1"},on:{click:function(e){return t.vote(e)}}},[s("v-icon",[t._v(" mdi-thumb-up ")])],1),s("div",{staticClass:"btn-text",staticStyle:{color:"green"}},[t._v(t._s(t.upVotes))])],1),s("div",[s("v-btn",{staticClass:"mx-2",attrs:{disabled:0===t.oldVote||3===t.oldVote,fab:"",dark:1===t.oldVote||2===t.oldVote,small:"",color:"red",value:"0"},on:{click:function(e){return t.vote(e)}}},[s("v-icon",[t._v(" mdi-thumb-down ")])],1),s("div",{staticClass:"btn-text",staticStyle:{color:"red"}},[t._v(t._s(t.downVotes))])],1),t.haveVoted&&t.isLoggedIn?s("div",{staticClass:"txt-small-vote"},[t._v(" You voted "),s("b",[t.oldVote?s("span",{staticStyle:{color:"green"}},[t._v("up")]):s("span",{staticStyle:{color:"red"}},[t._v("down")])]),t._v(". ")]):t.isLoggedIn?t._e():s("div",{staticClass:"txt-small-vote"},[t._v(" You are not logged in. ")])])],1)],1)])],1)},i=[],o=(s("4de4"),s("7db0"),s("b0c0"),s("5530")),r=s("2f62"),a={name:"ViewPost",computed:Object(o["a"])(Object(o["a"])({},Object(r["c"])(["currentPost","user","allComments","isLoggedIn"])),{},{upVotes:function(){return this.currentPost.votes.filter((function(t){return 1===t.type})).length},downVotes:function(){return this.currentPost.votes.filter((function(t){return 0===t.type})).length},haveVoted:function(){var t=this,e=this.currentPost.votes.find((function(e){return e.userId===t.user._id}));return!!e},oldVote:function(){var t=this;if(this.isLoggedIn){var e=this.haveVoted;if(e){var s=this.currentPost.votes.find((function(e){return null!==e.type&&e.userId==t.user._id}));return s.type}return 2}return 3}}),data:function(){return{text:null}},mounted:function(){this.getAllComments(this.$route.params.postId)},methods:Object(o["a"])(Object(o["a"])({},Object(r["b"])(["getAllComments","createComment","updatePost","getPost"])),{},{navigateBack:function(){this.$router.push("/community")},vote:function(t){var e=this,s=parseInt(t.currentTarget.value);if(this.isLoggedIn){if(!0===this.haveVoted)this.currentPost.votes.find((function(t){t.userId===e.user._id&&(t.type=s)}));else{var n={userId:this.user._id,type:s};this.currentPost.votes.push(n)}var i={id:this.currentPost._id,votes:this.currentPost.votes};this.updatePost(i)}},cancelComment:function(){this.text=null},submitComment:function(){var t=this,e=this.currentPost;e.type=this.$route.name.toLowerCase();var s={text:this.text,author:this.user.username?this.user.username:"Anonymous",userId:this.user._id?this.user._id:"",branch:e};this.createComment(s).then((function(e){e.data.success&&(t.getAllComments(t.$route.params.postId),t.text=null)}))}})},c=a,l=(s("94c5"),s("2877")),u=s("6544"),d=s.n(u),v=s("8336"),m=s("b0af"),p=s("99d9"),h=s("ce7e"),f=s("132d"),_=s("da13"),b=s("5d23"),C=s("8654"),x=Object(l["a"])(c,n,i,!1,null,null,null);e["default"]=x.exports;d()(x,{VBtn:v["a"],VCard:m["a"],VCardSubtitle:p["b"],VCardText:p["c"],VCardTitle:p["d"],VDivider:h["a"],VIcon:f["a"],VListItem:_["a"],VListItemContent:b["a"],VListItemSubtitle:b["b"],VTextField:C["a"]})}}]);
//# sourceMappingURL=chunk-1438123e.e5604a88.js.map